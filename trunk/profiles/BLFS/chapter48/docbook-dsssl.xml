<package name="docbook-dsssl" version="&docbook-dsssl-version;">

	<stage name="Unpacking a package.">
		<unpack>
			<archive>&packages_dir;/&docbook-dsssl-package;</archive>
			<destination>&build_dir;</destination>
		</unpack>
	</stage>

	<stage name="Installing a package.">
		<stageinfo>
			<base>&build_dir;/&docbook-dsssl-directory;</base>
		</stageinfo>

		<mkdir>
		       <option>parents</option>
		       <name>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;</name>
		 </mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>dtds/decls</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>lib</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>common</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>html</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>print</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>test</name>
		</mkdir>

		<mkdir base="/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;">
		        <option>parents</option>
			<name>images</name>
		</mkdir>

		<execute command="install">
		        <param>bin/collateindex.pl</param>
			<param>/usr/bin</param>
		</execute>

		<copy>
		        <source>catalog</source>
			<source>VERSION</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;</destination>
		</copy>

		<copy>
		        <source>dtds/decls/*.dcl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/dtds/decls</destination>
		</copy>

		<copy>
			<source>lib/dblib.dsl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/lib</destination>
		</copy>

		<copy>
		        <source>common/*.dsl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/common</destination>
		</copy>

		<copy>
		        <source>common/*.ent</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/common</destination>
		</copy>

		<copy>
		        <source>html/*.dsl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/html</destination>
		</copy>

		<copy>
		        <source>lib/*.dsl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/lib</destination>
		</copy>

		<copy>
		        <source>print/*.dsl</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/print</destination>
		</copy>

		<copy>
		        <source>images/*.gif</source>
			<destination>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/images</destination>
		</copy>

		<execute command="install-catalog">
		        <param>--add</param>
			<param>/etc/sgml/dsssl-docbook-stylesheets.cat</param>
			<param>/usr/share/sgml/docbook/dsssl-stylesheets-&docbook-dsssl-version;/catalog</param>
		</execute>

		<execute command="install-catalog">
		        <param>--add</param>
			<param>/etc/sgml/sgml-docbook.cat</param>
			<param>/etc/sgml/dsssl-docbook-stylesheets.cat</param>
		</execute>

	</stage>

	<stage name="Clean-up.">
		<remove>&build_dir;/&docbook-dsssl-directory;</remove>
	</stage>

</package>
